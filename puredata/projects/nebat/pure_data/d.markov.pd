#N canvas 703 132 446 456 10;
#X obj 123 104 inlet;
#X obj 123 336 outlet;
#X obj 210 104 inlet;
#X text 60 42 generate [bang];
#X text 190 41 record transitions [record \$1];
#X text 190 58 data [float/int];
#X text 122 360 markov generated numbers;
#N canvas 463 40 623 632 markov_chain 0;
#X obj 193 298 coll;
#C restore;
#X obj 44 330 list-wrandom;
#X obj 44 185 f;
#X obj 76 185 r \$0-markov_state;
#X obj 44 213 t b f;
#X obj 289 538 s \$0-markov_state;
#X obj 269 572 outlet;
#X obj 71 244 change;
#X obj 44 42 inlet;
#X obj 193 42 inlet;
#X text 188 22 weights;
#X text 43 21 bang;
#X obj 44 73 route bang float;
#N canvas 427 218 181 365 loadbang 0;
#X obj 31 321 outlet;
#X msg 31 56 bang;
#X obj 31 77 until;
#X text 88 56 start;
#X obj 31 99 f;
#X obj 60 99 + 1;
#X obj 85 76 sel 0;
#X obj 31 196 until;
#X obj 31 149 t b f;
#X obj 31 270 prepend;
#X text 86 98 index;
#X text 76 221 element;
#X obj 31 220 f 0;
#X obj 60 121 mod \$1;
#X obj 31 245 zl group \$1;
#X obj 31 171 f \$1;
#X obj 31 31 loadbang;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 13 0;
#X connect 6 0 2 1;
#X connect 7 0 12 0;
#X connect 8 0 15 0;
#X connect 8 1 9 1;
#X connect 9 0 0 0;
#X connect 12 0 14 0;
#X connect 13 0 4 1;
#X connect 13 0 6 0;
#X connect 14 0 9 0;
#X connect 15 0 7 0;
#X connect 16 0 1 0;
#X restore 211 263 pd loadbang;
#X obj 250 395 < \$1;
#X obj 269 502 f;
#X obj 250 367 t f f;
#X obj 250 423 sel 0 1;
#X obj 250 460 list-wrandom;
#X obj 319 42 inlet;
#X obj 338 110 list-wrandom;
#X obj 319 73 t a b a;
#X text 304 21 imprecision;
#X text 419 110 calculate initial state;
#X text 124 329 weighted random decision;
#X text 331 395 check for continuation;
#X text 333 459 if none generate a new number;
#X text 114 244 grab probs.;
#X text 227 298 store probs;
#X text 211 242 initialise [coll];
#X connect 0 0 1 1;
#X connect 1 0 16 0;
#X connect 2 0 4 0;
#X connect 3 0 2 1;
#X connect 4 0 1 0;
#X connect 4 1 7 0;
#X connect 7 0 0 0;
#X connect 8 0 12 0;
#X connect 9 0 0 0;
#X connect 12 0 2 0;
#X connect 12 1 2 1;
#X connect 13 0 0 0;
#X connect 14 0 17 0;
#X connect 15 0 5 0;
#X connect 15 0 6 0;
#X connect 16 0 14 0;
#X connect 16 1 15 1;
#X connect 17 0 18 0;
#X connect 17 1 15 0;
#X connect 18 0 15 0;
#X connect 19 0 21 0;
#X connect 20 0 2 1;
#X connect 21 0 18 1;
#X connect 21 1 20 0;
#X connect 21 2 20 1;
#X restore 123 302 pd markov_chain;
#X obj 313 185 t f f;
#X text 60 57 push state [float];
#N canvas 502 113 255 428 init 0;
#X obj 55 254 gate;
#X obj 121 206 1-0;
#X obj 55 300 zl group \$1;
#X obj 121 32 inlet;
#X obj 57 32 inlet;
#X obj 55 341 outlet;
#X obj 160 206 counter;
#X obj 121 69 t b f b b;
#X obj 57 70 t b b b;
#N canvas 475 55 517 257 math 0;
#X obj 38 59 inlet;
#X obj 81 58 inlet;
#X obj 38 204 outlet;
#X text 80 34 Big;
#X text 34 34 Small;
#X text 137 45 This calculates each percentage. In the left inlet it
recieves the amount to calculate and in the right inlet it recieves
the total amount of transitions which occured.;
#X obj 81 80 t b f;
#X obj 81 103 f 1;
#X obj 38 182 * 100;
#X obj 38 81 t f b;
#X text 138 111 This is the same as dividing the smaller number by
the bigger one and multiplying by 100;
#X text 137 163 I wanted to speed up this part of the patch so have
tried to limit the amount of times the division is called.;
#X obj 38 161 * 1;
#X obj 93 127 / 1;
#X text 30 225 Percentage;
#X obj 65 144 f 0;
#X connect 0 0 9 0;
#X connect 1 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 13 1;
#X connect 7 0 13 0;
#X connect 8 0 2 0;
#X connect 9 0 12 0;
#X connect 9 1 15 0;
#X connect 12 0 8 0;
#X connect 13 0 15 1;
#X connect 15 0 12 1;
#X restore 55 276 pd math;
#N canvas 147 124 445 464 hist 0;
#X obj 158 262 coll;
#C restore;
#N canvas 192 205 221 444 initial 0;
#X obj 81 25 inlet;
#X obj 81 302 outlet;
#X msg 81 122 bang;
#X obj 81 143 until;
#X text 39 121 start;
#X obj 81 165 f;
#X obj 110 165 + 1;
#X obj 135 142 sel 0;
#X text 37 163 index;
#X obj 81 74 t b b;
#X msg 108 276 clear;
#X obj 110 187 mod \$1;
#X obj 81 237 pack f 0;
#X connect 0 0 9 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 12 0;
#X connect 6 0 11 0;
#X connect 7 0 3 1;
#X connect 9 0 2 0;
#X connect 9 1 10 0;
#X connect 10 0 1 0;
#X connect 11 0 5 1;
#X connect 11 0 7 0;
#X connect 12 0 1 0;
#X restore 262 103 pd initial;
#X msg 139 186 nth \$1 \$2;
#X obj 139 47 inlet;
#X obj 125 302 gate 2;
#X obj 124 269 1-0;
#X obj 125 329 + 1;
#X msg 217 245 nsub \$1 \$2 \$3;
#X obj 217 198 f;
#X obj 247 164 t b f;
#X obj 139 213 t b a b;
#X obj 32 47 inlet;
#X text 27 27 retrieve;
#X obj 158 398 outlet;
#X msg 59 134 nth \$1 \$2;
#X obj 59 155 t b a b;
#X msg 98 177 2;
#X msg 59 178 0;
#X obj 262 51 inlet;
#X obj 139 113 t f f;
#X text 133 26 increment;
#X text 265 31 reset;
#X obj 272 75 loadbang;
#X obj 59 112 pack f 1;
#X obj 217 221 pack f 1 f;
#X obj 139 160 pack f 1;
#X obj 125 354 s \$0-markov_trig_increment;
#X obj 247 140 r \$0-markov_trig_increment;
#X text 259 14 bang;
#X text 135 12 float;
#X text 31 13 float;
#X obj 32 78 t f f;
#X obj 32 398 outlet;
#X connect 0 0 4 1;
#X connect 1 0 0 0;
#X connect 2 0 10 0;
#X connect 3 0 19 0;
#X connect 4 0 6 0;
#X connect 4 1 13 0;
#X connect 5 0 4 0;
#X connect 6 0 26 0;
#X connect 7 0 0 0;
#X connect 8 0 24 0;
#X connect 9 0 8 0;
#X connect 9 1 24 2;
#X connect 10 0 5 1;
#X connect 10 1 0 0;
#X connect 10 2 5 0;
#X connect 11 0 31 0;
#X connect 14 0 15 0;
#X connect 15 0 17 0;
#X connect 15 1 0 0;
#X connect 15 2 16 0;
#X connect 16 0 4 0;
#X connect 17 0 4 0;
#X connect 18 0 1 0;
#X connect 19 0 25 0;
#X connect 19 1 8 1;
#X connect 22 0 1 0;
#X connect 23 0 14 0;
#X connect 24 0 7 0;
#X connect 25 0 2 0;
#X connect 27 0 9 0;
#X connect 31 0 32 0;
#X connect 31 1 23 0;
#X restore 37 206 pd hist;
#N canvas 243 246 279 339 get 0;
#X obj 107 53 inlet;
#X obj 107 204 outlet;
#X msg 107 80 bang;
#X obj 107 101 until;
#X text 65 79 start;
#X obj 107 123 f;
#X obj 136 123 + 1;
#X obj 161 100 sel 0;
#X text 63 121 index;
#X obj 136 145 mod \$1;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 1 0;
#X connect 6 0 9 0;
#X connect 7 0 3 1;
#X connect 9 0 5 1;
#X connect 9 0 7 0;
#X restore 37 147 pd get;
#X text 62 13 get;
#X text 118 13 store;
#X text 59 365 probs.;
#X connect 0 0 9 0;
#X connect 1 0 0 0;
#X connect 2 0 5 0;
#X connect 3 0 7 0;
#X connect 4 0 8 0;
#X connect 6 0 9 1;
#X connect 7 0 1 0;
#X connect 7 1 10 1;
#X connect 7 2 1 1;
#X connect 7 3 6 0;
#X connect 8 0 6 2;
#X connect 8 1 10 2;
#X connect 8 2 11 0;
#X connect 9 0 2 0;
#X connect 10 1 0 1;
#X connect 11 0 10 0;
#X restore 210 259 pd init;
#N canvas 607 79 197 248 mode 0;
#X obj 33 62 route record float;
#X obj 33 86 t f f;
#X obj 87 118 gate;
#X obj 33 142 sel 0;
#X obj 87 141 int;
#X obj 33 32 inlet;
#X obj 33 188 outlet;
#X obj 87 187 outlet;
#X connect 0 0 1 0;
#X connect 0 1 2 1;
#X connect 1 0 3 0;
#X connect 1 1 2 0;
#X connect 2 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 7 0;
#X connect 5 0 0 0;
#X restore 210 142 pd mode;
#N canvas 561 190 260 315 p_p 0;
#X obj 27 104 pack;
#X obj 27 181 gate 0;
#X obj 27 131 t b l;
#X obj 27 156 f 1;
#X obj 27 205 zl rev;
#X obj 27 33 inlet;
#X obj 27 68 t f f;
#X obj 27 242 outlet;
#X text 77 105 [present \, past];
#X text 79 154 open gate;
#X text 79 179 discard first value;
#X text 78 204 [past \, present];
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 2 1 1 1;
#X connect 3 0 1 0;
#X connect 4 0 7 0;
#X connect 5 0 6 0;
#X connect 6 0 0 1;
#X connect 6 1 0 0;
#X restore 313 223 pd p_p;
#N canvas 167 22 690 739 popu 0;
#X obj 370 33 inlet;
#N canvas 475 55 517 257 math 0;
#X obj 38 59 inlet;
#X obj 81 58 inlet;
#X obj 38 204 outlet;
#X text 80 34 Big;
#X text 34 34 Small;
#X text 137 45 This calculates each percentage. In the left inlet it
recieves the amount to calculate and in the right inlet it recieves
the total amount of transitions which occured.;
#X obj 81 80 t b f;
#X obj 81 103 f 1;
#X obj 38 182 * 100;
#X obj 38 81 t f b;
#X text 138 111 This is the same as dividing the smaller number by
the bigger one and multiplying by 100;
#X text 137 163 I wanted to speed up this part of the patch so have
tried to limit the amount of times the division is called.;
#X obj 38 161 * 1;
#X obj 93 127 / 1;
#X text 30 225 Percentage;
#X obj 65 144 f 0;
#X connect 0 0 9 0;
#X connect 1 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 13 1;
#X connect 7 0 13 0;
#X connect 8 0 2 0;
#X connect 9 0 12 0;
#X connect 9 1 15 0;
#X connect 12 0 8 0;
#X connect 13 0 15 1;
#X connect 15 0 12 1;
#X restore 339 461 pd math;
#X obj 339 520 t l b;
#X obj 339 581 prepend;
#X obj 378 550 f;
#X obj 345 402 gate 0;
#X obj 345 307 1-0;
#X obj 378 372 pack;
#X obj 345 430 unpack;
#N canvas 136 138 451 406 database 0;
#X obj 158 262 coll;
#C restore;
#N canvas 192 205 221 444 initial 0;
#X obj 81 25 inlet;
#X obj 81 392 outlet;
#X msg 81 122 bang;
#X obj 81 143 until;
#X text 39 121 start;
#X obj 81 165 f;
#X obj 110 165 + 1;
#X obj 135 142 sel 0;
#X obj 81 262 until;
#X obj 81 215 t b f;
#X obj 81 336 prepend;
#X text 37 163 index;
#X text 27 286 element;
#X obj 81 74 t b b;
#X msg 108 366 clear;
#X obj 81 286 f 0;
#X obj 110 187 mod \$1;
#X obj 81 238 f \$1;
#X obj 81 311 zl group \$1;
#X connect 0 0 13 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 9 0;
#X connect 6 0 16 0;
#X connect 7 0 3 1;
#X connect 8 0 15 0;
#X connect 9 0 17 0;
#X connect 9 1 10 1;
#X connect 10 0 1 0;
#X connect 13 0 2 0;
#X connect 13 1 14 0;
#X connect 14 0 1 0;
#X connect 15 0 18 0;
#X connect 16 0 5 1;
#X connect 16 0 7 0;
#X connect 17 0 8 0;
#X connect 18 0 10 0;
#X restore 262 103 pd initial;
#X msg 139 186 nth \$1 \$2;
#X obj 139 73 unpack;
#X obj 139 47 inlet;
#X obj 200 90 + 1;
#X obj 139 160 pack;
#X obj 125 302 gate 2;
#X obj 124 269 1-0;
#X obj 125 328 + 1;
#X msg 217 245 nsub \$1 \$2 \$3;
#X obj 200 113 t f f;
#X obj 217 221 pack f f f;
#X obj 217 198 f;
#X obj 247 164 t b f;
#X obj 139 213 t b a b;
#X obj 59 47 inlet;
#X text 54 27 retrieve;
#X obj 158 328 outlet;
#X obj 59 73 unpack;
#X obj 92 95 + 1;
#X msg 59 134 nth \$1 \$2;
#X obj 59 112 pack;
#X obj 59 155 t b a b;
#X msg 98 177 2;
#X msg 59 178 0;
#X obj 262 51 inlet;
#X obj 139 113 t f f;
#X text 133 26 increment;
#X text 265 31 reset;
#X obj 272 75 loadbang;
#X obj 247 140 r \$0-markov_increment;
#X obj 125 353 s \$0-markov_increment;
#X connect 0 0 7 1;
#X connect 1 0 0 0;
#X connect 2 0 15 0;
#X connect 3 0 27 0;
#X connect 3 1 5 0;
#X connect 4 0 3 0;
#X connect 5 0 11 0;
#X connect 6 0 2 0;
#X connect 7 0 9 0;
#X connect 7 1 18 0;
#X connect 8 0 7 0;
#X connect 9 0 32 0;
#X connect 10 0 0 0;
#X connect 11 0 6 1;
#X connect 11 1 12 1;
#X connect 12 0 10 0;
#X connect 13 0 12 0;
#X connect 14 0 13 0;
#X connect 14 1 12 2;
#X connect 15 0 8 1;
#X connect 15 1 0 0;
#X connect 15 2 8 0;
#X connect 16 0 19 0;
#X connect 19 0 22 0;
#X connect 19 1 20 0;
#X connect 20 0 22 1;
#X connect 21 0 23 0;
#X connect 22 0 21 0;
#X connect 23 0 25 0;
#X connect 23 1 0 0;
#X connect 23 2 24 0;
#X connect 24 0 7 0;
#X connect 25 0 7 0;
#X connect 26 0 1 0;
#X connect 27 0 6 0;
#X connect 27 1 13 1;
#X connect 30 0 1 0;
#X connect 31 0 14 0;
#X restore 339 220 pd database;
#X obj 370 127 unpack;
#X obj 370 159 t f f;
#X obj 370 189 pack;
#X obj 293 128 unpack;
#X obj 292 189 change;
#X obj 293 154 t f f;
#X obj 339 189 pack;
#X obj 20 33 inlet;
#X obj 339 664 outlet;
#X obj 65 120 s \$0-markov_populate_retrieve;
#X obj 95 80 s \$0-markov_populate_initialise;
#X obj 80 100 s \$0-markov_populate_start;
#X obj 50 140 s \$0-markov_populate_stop;
#X obj 35 160 s \$0-markov_populate_clear;
#X obj 20 180 s \$0-markov_populate_reset;
#X obj 402 189 r \$0-markov_populate_reset;
#X obj 417 304 r \$0-markov_populate_clear;
#X obj 360 277 r \$0-markov_populate_stop;
#X obj 293 80 r \$0-markov_populate_retrieve;
#X obj 345 251 r \$0-markov_populate_start;
#X obj 354 604 r \$0-markov_populate_initialise;
#X obj 20 59 t b b b b b b;
#X msg 354 632 clear;
#X text 19 11 get weights;
#X obj 339 489 zl group \$1;
#N canvas 147 124 445 464 hist 0;
#X obj 158 262 coll;
#C restore;
#N canvas 192 205 221 444 initial 0;
#X obj 81 25 inlet;
#X obj 81 302 outlet;
#X msg 81 122 bang;
#X obj 81 143 until;
#X text 39 121 start;
#X obj 81 165 f;
#X obj 110 165 + 1;
#X obj 135 142 sel 0;
#X text 37 163 index;
#X obj 81 74 t b b;
#X msg 108 276 clear;
#X obj 110 187 mod \$1;
#X obj 81 237 pack f 0;
#X connect 0 0 9 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 12 0;
#X connect 6 0 11 0;
#X connect 7 0 3 1;
#X connect 9 0 2 0;
#X connect 9 1 10 0;
#X connect 10 0 1 0;
#X connect 11 0 5 1;
#X connect 11 0 7 0;
#X connect 12 0 1 0;
#X restore 262 103 pd initial;
#X msg 139 186 nth \$1 \$2;
#X obj 139 47 inlet;
#X obj 125 302 gate 2;
#X obj 124 269 1-0;
#X obj 125 329 + 1;
#X msg 217 245 nsub \$1 \$2 \$3;
#X obj 217 198 f;
#X obj 247 164 t b f;
#X obj 139 213 t b a b;
#X obj 32 47 inlet;
#X text 27 27 retrieve;
#X obj 158 398 outlet;
#X msg 59 134 nth \$1 \$2;
#X obj 59 155 t b a b;
#X msg 98 177 2;
#X msg 59 178 0;
#X obj 262 51 inlet;
#X obj 139 113 t f f;
#X text 133 26 increment;
#X text 265 31 reset;
#X obj 272 75 loadbang;
#X obj 59 112 pack f 1;
#X obj 217 221 pack f 1 f;
#X obj 139 160 pack f 1;
#X obj 125 354 s \$0-markov_trig_increment;
#X obj 247 140 r \$0-markov_trig_increment;
#X text 259 14 bang;
#X text 135 12 float;
#X text 31 13 float;
#X obj 32 78 t f f;
#X obj 32 398 outlet;
#X connect 0 0 4 1;
#X connect 1 0 0 0;
#X connect 2 0 10 0;
#X connect 3 0 19 0;
#X connect 4 0 6 0;
#X connect 4 1 13 0;
#X connect 5 0 4 0;
#X connect 6 0 26 0;
#X connect 7 0 0 0;
#X connect 8 0 24 0;
#X connect 9 0 8 0;
#X connect 9 1 24 2;
#X connect 10 0 5 1;
#X connect 10 1 0 0;
#X connect 10 2 5 0;
#X connect 11 0 31 0;
#X connect 14 0 15 0;
#X connect 15 0 17 0;
#X connect 15 1 0 0;
#X connect 15 2 16 0;
#X connect 16 0 4 0;
#X connect 17 0 4 0;
#X connect 18 0 1 0;
#X connect 19 0 25 0;
#X connect 19 1 8 1;
#X connect 22 0 1 0;
#X connect 23 0 14 0;
#X connect 24 0 7 0;
#X connect 25 0 2 0;
#X connect 27 0 9 0;
#X connect 31 0 32 0;
#X connect 31 1 23 0;
#X restore 378 341 pd hist;
#X text 214 372 [State \, Occurences];
#X text 416 215 x = current state;
#X text 416 226 y = previous state;
#N canvas 243 246 279 339 get 0;
#X obj 136 21 inlet;
#X obj 124 286 outlet;
#X msg 136 48 bang;
#X obj 136 69 until;
#X text 94 47 start;
#X obj 136 91 f;
#X obj 165 91 + 1;
#X obj 190 68 sel 0;
#X obj 136 141 t b f;
#X obj 124 261 prepend;
#X text 92 89 index;
#X msg 71 158 bang;
#X obj 71 179 until;
#X text 29 157 start;
#X obj 71 201 f;
#X obj 100 201 + 1;
#X obj 125 178 sel 0;
#X text 27 199 index;
#X obj 165 113 mod \$1;
#X obj 100 223 mod \$1;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 8 0;
#X connect 6 0 18 0;
#X connect 7 0 3 1;
#X connect 8 0 11 0;
#X connect 8 1 9 1;
#X connect 9 0 1 0;
#X connect 11 0 12 0;
#X connect 12 0 14 0;
#X connect 14 0 15 0;
#X connect 14 0 9 0;
#X connect 15 0 19 0;
#X connect 16 0 12 1;
#X connect 18 0 5 1;
#X connect 18 0 7 0;
#X connect 19 0 14 1;
#X connect 19 0 16 0;
#X restore 293 104 pd get;
#X text 350 10 store occurences;
#X text 404 550 State;
#X text 198 520 list of probabilities;
#X text 215 459 Percentage;
#X text 295 460 Small;
#X text 391 461 Big;
#X connect 0 0 10 0;
#X connect 1 0 34 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 18 0;
#X connect 4 0 3 1;
#X connect 5 0 8 0;
#X connect 6 0 5 0;
#X connect 7 0 5 1;
#X connect 8 0 4 1;
#X connect 8 1 1 1;
#X connect 9 0 1 0;
#X connect 10 0 11 0;
#X connect 10 1 12 1;
#X connect 11 0 12 0;
#X connect 11 1 35 1;
#X connect 12 0 9 1;
#X connect 13 0 15 0;
#X connect 13 1 16 1;
#X connect 14 0 35 0;
#X connect 15 0 16 0;
#X connect 15 1 14 0;
#X connect 16 0 9 0;
#X connect 17 0 31 0;
#X connect 25 0 9 2;
#X connect 26 0 35 2;
#X connect 27 0 6 1;
#X connect 28 0 39 0;
#X connect 29 0 6 0;
#X connect 30 0 32 0;
#X connect 31 0 24 0;
#X connect 31 1 23 0;
#X connect 31 2 22 0;
#X connect 31 3 19 0;
#X connect 31 4 21 0;
#X connect 31 5 20 0;
#X connect 32 0 18 0;
#X connect 34 0 2 0;
#X connect 35 0 7 0;
#X connect 35 1 7 1;
#X connect 39 0 13 0;
#X restore 274 259 pd popu;
#X obj 210 185 t b b;
#X connect 0 0 7 0;
#X connect 2 0 11 0;
#X connect 7 0 1 0;
#X connect 8 0 12 0;
#X connect 8 1 10 1;
#X connect 10 0 7 2;
#X connect 11 0 14 0;
#X connect 11 1 8 0;
#X connect 12 0 13 1;
#X connect 13 0 7 1;
#X connect 14 0 10 0;
#X connect 14 1 13 0;
